@model WebChat.Common.Models.ChatRoomFromUrlModel
@{
    ViewBag.Title = "Chat";
    Layout = "~/Views/Shared/_LayoutVersion1.cshtml";
}
@section styles {
        <link href="~/Content/emoticons.css" rel="stylesheet" />  
}
<script type="text/javascript">
    var _userId     = "-1";
    var _roomId     ="-1"; 
    var _configId   = "-1";
    var _opCount    ="-1";
    var _firstMessageId ="-1";
    var selectedChatConfigId  = "-1";
    var _userAlreadySigned = false; //
    var _HaveException = false;

    var _userId     = @Html.Raw(Json.Encode(this.Model.UserId));
    var _roomId     = @Html.Raw(Json.Encode(this.Model.RoomId));
    var _configId   = @Html.Raw(Json.Encode(this.Model.ChatConfigId));
    var _opCount    = @Html.Raw(Json.Encode(this.Model.OperatrCount));
    var _firstMessageId = @Html.Raw(Json.Encode(this.Model.MessageId));
    var _userAlreadySigned = @Html.Raw(Json.Encode(this.Model.userAlreadySigned));

    var _RetriveMessage_Timer    = @Html.Raw(Json.Encode(this.Model.RetriveMessage_Timer));

    var _GetRecord_Timer    = @Html.Raw(Json.Encode(this.Model.GetRecord_Timer));
    var GET_RECORDID_TRIES    = @Html.Raw(Json.Encode(this.Model.GetRecordIdTries));
    var _IsConfigavailable  = @Html.Raw(Json.Encode(this.Model.IsConfigavailable)); //<--Controla que existan configuraciones
    
    var ClientInactivityTimeOut = @Html.Raw(Json.Encode(this.Model.ClientInactivityTimeOut)); 
    var GetRecord_TimeOut = @Html.Raw(Json.Encode(this.Model.GetRecord_TimeOut));
    var _emailAvailable =  @Html.Raw(Json.Encode(this.Model.EmailAvailable));
    var _version = @Html.Raw(Json.Encode(this.Model.VersionWeb)); 
    
    //ENCUESTAS
    var _isSurveyAvailable = @Html.Raw(Json.Encode(this.Model.SurveyAvailable)); 
    var _surveyText = @Html.Raw(Json.Encode(this.Model.ChatSurveyConfigText)); 
    var _surveyUrl = @Html.Raw(Json.Encode(this.Model.ChatSurveyConfigURL));


    _HaveException =  @Html.Raw(Json.Encode(this.Model.HaveException));

    var _MaxLength_Message =  @Html.Raw(Json.Encode(this.Model.MaxLength_Message));

</script>

 <style>


       
             
    </style>

@*<button id="btnOpenChat" type="button" class="btn btn-primary btn-small">Call chat GET</button>*@

@*        <div id="chatRoomView">
            @Html.Partial("_ChatRoomView")
        </div>*@

            <div id="div-chatRoomView" style="position:absolute; width:100%; height:100%;">
    @Html.Partial("_ChatRoomView");
</div>
  
            <div id="emailForm" class="modal fade" tabindex="-1" role="dialog" aria-labelledby=" " aria-hidden="true">
                @Html.Partial("_EmailFormView")
            </div>

@*@Html.Partial("_info")*@

 @section scripts {
    <script src="~/Scripts/epironchatversion1/EpironChat_url.js"></script>
    <script src="~/Scripts/emoticons.js"></script>
    <script src="~/Scripts/jquery-dateFormat.js"></script>
    <script src="~/Scripts/epironchatversion1/EpironChatEmail.js"></script>
    @Scripts.Render("~/bundles/jqueryui")
}
