
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title id='Description'>In this demo the jqxTree is built from JSON data.</title>
    <link rel="stylesheet" href="/jqwidgets/styles/jqx.base.css" type="text/css" />
    
    <script type="text/javascript" src="/scripts/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxdata.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxdropdownlist.js"></script>

    <script type="text/javascript" src="/jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxgrid.pager.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxgrid.selection.js"></script> 
        
    <script type="text/javascript" src="/jqwidgets/jqxpanel.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxtree.js"></script>
    <script type="text/javascript" src="/jqwidgets/jqxexpander.js"></script>
    <script type="text/javascript" src="/scripts/gettheme.js"></script>
    <script src="generatedata.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var theme = getDemoTheme();
            $('#jqxExpander').jqxExpander({ showArrow: false, toggleMode: 'none', width: '300px', height: '860px', theme: theme });
//            $('#expander').jqxExpander({ showArrow: false, toggleMode: 'none', width: '500px', height: '860px', theme: theme });
            
                            varUrl = "/service/wcf_service.svc/RetriveCategories";
                            varData = '{}';
                            $.ajax({
                                type: "POST",
                                url: varUrl,
                                data: varData,
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                processdata: true,
                                success: function (data) {

                                    OnRetriveCategories_Succeeded(data);
                                },
                                error: ServiceFailed
                            });

            var varUrl = "/service/wcf_service.svc/RetriveProducts";
            var varData = '{"categoryId": "20"}';
            $.ajax({
                type: "POST",
                url: varUrl,
                data: varData,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                processdata: true,
                success: function (data) {

                    OnRetriveProducts_Succeeded(data);
                },
                error: ServiceFailed
            });

        });

        function OnRetriveProducts_Succeeded(result) {
            var theme = getDemoTheme();
            var data = new Array();
            var totalprice = 0;
            var list = result.RetriveProductsResult;


            for (var i = 0; i < list.length; i++) {
                var row = {};
                row["Count"] = list[i]['Count'];
                row["Description"] = list[i]['Description'];
                row["Price"] = list[i]['Price'];
                data[i] = row;
                totalprice += list[i]['Price'];
            }

            var source =
                    {
                        localdata: data,
                        datatype: "array"
                    };

            var dataAdapter = new $.jqx.dataAdapter(source);

            $("#jqxgrid").jqxGrid(
                    {
                        width: 454,
                        height: 503,
                        source: dataAdapter,
                        theme: theme,
                        editable: false,
                        selectionmode: 'singlecell',
                        touchmode: true,
                        columns: [
                          { text: 'Cantidad', dataField: 'Count', width: 100 },
                          { text: 'Description', dataField: 'Description', width: 100 },
                          { text: 'Price', dataField: 'Price', width: 90, cellsalign: 'right', cellsformat: 'c2' },

                        ]
                    });


        }

        </script>
</head>
<body class='default'>

        
   
 
        <table>
            <tr>
               <td style="width: 400PX">
                    <div id='jqxWidget3' style="width: 400PX">
                        <div id='jqxExpander'>
                            <div>
                                Folders
                            </div>
                            <div style="border: none;" id="jqxTree">
                            </div>
                        </div>
                    </div>
                </td>
                 
                <td style="width: 400px">
                  <div id='jqxWidgeat' style="height:100%; font-size: 13px; font-family: Verdana; float: none;">
                        <div id='jqxgrid' style='height:100%;top: 5px; left: 10px; position: relative;'>
                        </div>
                    </div>
                <!--<div id='expander'>
                         <div>
                                Productos
                            </div>
                 
                </div>-->
                </td>
            </tr>
        </table>
   
   
</body>
</html>
